<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BobbyList - Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/bobbylist.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/mdb.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/dragula.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/pignose.calendar.css') }}">
    <style>

        #navbar-right-options > * {
            cursor: pointer;
            padding-left: 5px;
            padding-right: 5px;
        }

        .sidebar {
            position: fixed;
            width: 250px;
            min-width: 250px;
            background: #FFFFFF;
            height: 100%;
            padding-top: 75px;
            margin-left: -15px;
            overflow-x: hidden;
        }

        .mainpane {
            position: absolute;
            margin-left: 235px;
            padding-top: 75px;
            padding-left: 15px;
            width: -webkit-calc(100% - 250px);
            width:    -moz-calc(100% - 250px);
            width:         calc(100% - 250px);
            height: 100%;
        }

        .rounded-circle {
            border-radius: 70px;
        }

        .sidebar_items > label{
            cursor: pointer;
            padding-top: 5px;
            padding-bottom: 5px;
        }

        .navbar-search {
            position:absolute;
            margin-top: 60px;
            width:100%;
            height: 200px;
            z-index: 1000;
            display: none;
        }

        .task_assignee_holder {
            display: flex;
            padding-top: 15px;
            padding-bottom: 15px;
            text-align: center;
            margin: 10px 0;
        }

        .task_assignee_holder > * {
            padding-left: 10px;
            padding-right: 10px;
        }

        .switch {
          position: relative;
          display: inline-block;
          width: 60px;
          height: 34px;
        }

        .switch input {display:none;}

        .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          -webkit-transition: .4s;
          transition: .4s;
        }

        .slider:before {
          position: absolute;
          content: "";
          height: 26px;
          width: 26px;
          left: 4px;
          bottom: 4px;
          background-color: white;
          -webkit-transition: .4s;
          transition: .4s;
        }

        input:checked + .slider {
          background-color: #2196F3;
        }

        input:focus + .slider {
          box-shadow: 0 0 1px #2196F3;
        }

        input:checked + .slider:before {
          -webkit-transform: translateX(26px);
          -ms-transform: translateX(26px);
          transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
          border-radius: 34px;
        }

        .slider.round:before {
          border-radius: 50%;
        }


        /*
        * ==========================================================
        *     MAIN NAVBAR
        * ==========================================================
        */
        nav.navbar {
            background: #2f333e;
            padding-top: 15px;
            padding-bottom: 15px;
            color: #fff;
            position: relative;
            border-radius: 0;
            box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            padding-left: 0;
            padding-right: 0;
            /*==== Toggle Sidebar Btn ====*/
            /*==== Navbar Items ====*/
            /*==== Search Box ====*/
            /*==== Dropdowns ====*/
        }

        nav.navbar .badge {
            width: 22px;
            height: 22px;
            line-height: 22px;
            text-align: center;
            padding: 0;
            margin-left: -15px;
            margin-top: -30px;
            border-radius: 50%;
        }

        nav.navbar .navbar-brand .brand-small {
            display: none;
        }

        nav.navbar a {
            color: inherit;
        }

        nav.navbar .container-fluid {
            width: 100%;
        }

        nav.navbar .menu-btn {
            margin-right: 20px;
            font-size: 1.2em;
            transition: all 0.7s;
        }

        nav.navbar .menu-btn span {
            width: 20px;
            height: 2px;
            background: #fff;
            display: block;
            margin: 4px auto 0;
            transition: all 0.3s cubic-bezier(0.81, -0.33, 0.345, 1.375);
        }

        nav.navbar .menu-btn span:nth-of-type(2) {
            position: relative;
            width: 35px;
            transform: rotateY(180deg);
        }

        nav.navbar .menu-btn span:nth-of-type(2)::before, nav.navbar .menu-btn span:nth-of-type(2)::after {
            content: '';
            width: 6px;
            height: 2px;
            display: block;
            background: #fff;
            transform: rotate(45deg);
            position: absolute;
            top: 2px;
            left: 0;
            transition: all 0.7s;
        }

        nav.navbar .menu-btn span:nth-of-type(2)::after {
            transform: rotate(145deg);
            position: absolute;
            top: -2px;
            left: 0;
        }

        nav.navbar .menu-btn.active span:first-of-type {
            transform: translateY(12px);
        }

        nav.navbar .menu-btn.active span:nth-of-type(2) {
            transform: none;
        }

        nav.navbar .menu-btn.active span:last-of-type {
            transform: translateY(-12px);
        }

        nav.navbar .nav-item > a {
            position: relative;
        }

        nav.navbar .nav-item > a span {
            position: absolute;
            top: 0;
            right: 0;
            font-weight: 400;
            font-size: 0.7em;
        }

        nav.navbar .nav-item > a.logout i {
            margin-left: 10px;
        }

        nav.navbar .search-box {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            right: 0;
            padding: 0;
            background: #fff;
            z-index: 990;
            border-radius: 0;
            display: none;
        }

        nav.navbar .search-box .dismiss {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: none;
            border: none;
            z-index: 999;
            cursor: pointer;
            font-size: 1.5em;
        }

        nav.navbar .search-box form {
            height: 100%;
        }

        nav.navbar .search-box form input {
            height: 100%;
            border: none;
            font-size: xx-large;
            padding: 0px 20px 0px 20px;
        }

        nav.navbar .dropdown-menu {
            right: 0;
            min-width: 250px;
            left: auto;
            margin-top: 15px;
            padding: 15px 0;
            max-width: 400px;
            border-radius: 0;
            border: none;
            box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.1), -2px 0 2px rgba(0, 0, 0, 0.1);
        }

        nav.navbar .dropdown-menu a {
            background: #fff;
            padding: 10px 20px;
            font-size: 0.8em;
            color: #777;
            width: 100%;
        }

        nav.navbar .dropdown-menu a:hover {
            background: #f5f5f5;
        }

        nav.navbar .dropdown-menu a i {
            width: 30px;
            height: 30px;
            line-height: 30px;
            background: #796AEE;
            text-align: center;
            color: #fff;
            border-radius: 50%;
            margin-right: 10px;
        }

        nav.navbar .dropdown-menu a small {
            margin-left: 40px;
        }

        nav.navbar .dropdown-menu span {
            position: static;
            font-size: 0.9em;
            color: #999;
        }

        nav.navbar .dropdown-menu strong {
            font-weight: 700;
        }

        nav.navbar .dropdown-menu .msg-profile {
            width: 45px;
            height: 45px;
            margin-right: 10px;
        }

        nav.navbar .dropdown-menu h3 {
            font-weight: 500;
        }

        /* MAIN NAVBAR MEDIAQUERIES ----------------------------------- */
        @media (max-width: 1200px) {
            nav.navbar {
                /*==== Toggle Sidebar Btn ====*/
            }
            nav.navbar .navbar-brand .brand-small {
                display: block !important;
            }
            nav.navbar .menu-btn {
                margin-right: 20px;
                font-size: 1.2em;
                transition: all 0.7s;
            }
            nav.navbar .menu-btn span:first-of-type {
                transform: translateY(12px);
            }
            nav.navbar .menu-btn span:nth-of-type(2) {
                transform: none;
            }
            nav.navbar .menu-btn span:nth-of-type(2)::before, nav.navbar .menu-btn span:nth-of-type(2)::after {
                transform: rotate(45deg);
            }
            nav.navbar .menu-btn span:nth-of-type(2)::after {
                transform: rotate(145deg);
                position: absolute;
                top: -2px;
                left: 0;
            }
            nav.navbar .menu-btn span:last-of-type {
                transform: translateY(-12px);
            }
            nav.navbar .menu-btn.active span:first-of-type {
                transform: none;
            }
            nav.navbar .menu-btn.active span:nth-of-type(2) {
                transform: rotateY(180deg);
            }
            nav.navbar .menu-btn.active span:last-of-type {
                transform: none;
            }
        }

        @media (max-width: 576px) {
            nav.navbar {
                font-size: 14px;
            }
            nav.navbar .badge {
                width: 19px;
                height: 19px;
            }
            nav.navbar .nav-item > a {
                font-size: 13px;
            }
            nav.navbar .dropdown-menu {
                right: auto;
                left: -50%;
                transform: translateX(-50%);
            }
        }

        .pignose-calendar .icon-arrow-left:before {
          content: '<';
        }
        .pignose-calendar .icon-arrow-right:before {
          content: '>';
        }

.header_button {
  width: 50px;
  height: 50px;

  position:absolute;
  top:25px;
  right:55px;
  z-index:2;

  border-radius: 25px;
  background: #514A9D;
  border: 0px;
  box-shadow: none;
  outline: none;
  cursor: pointer;

  -webkit-appearance: none;
  -moz-appearance: none;
}

.header_button svg {
  width: 16px;
  height: 16px;
  position: absolute;
  top: 50%;
  left: 50%;
    margin: -8px 0 0 -8px;
}

.header_button svg .fill {
  fill: #24C6DC;
}
        .milestones_list {
            overflow-y: scroll;
            max-height: 320px;
        }
        .milestone_li {
            width:90%;
            margin-left: 5%;
            border-bottom: 2px solid #514A9D;
            height: auto;
            padding-top: 10px;
            padding-bottom: 10px;
            display: flex;
        }

        .milestone_li .delete_btn {
            padding: 2px;
            width:20%;
            cursor: pointer;
        }

        .create_task_btn{
            background: #FFFFFF;
            border-radius: 50px;
            font-weight: bold;
            color: #514A9D;
            border: 1px solid #24C6DC;
            margin-top: 25px;
            padding-top: 20px;
            padding-bottom: 20px;
            padding-left: 40px;
            padding-right: 40px;
        }

        .task_tags_holder {
            float: right;
            display: flex
        }

        .task_tag {
            width: 20px;
            height: 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        .tags_main {
            display: flex;
            align-items: stretch; /* Default */
            justify-content: space-between;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .tags_main_sub {
            display: block;
            flex: 0 1 auto;
            cursor: pointer;
        }

        .task_tag_main_start {
            width: 20px;
            height: 20px;
            border-radius: 20px;
        }

        .task_tag_main_current {
            width: 20px;
            height: 20px;
            border-radius: 20px;
        }

        .task_tag_main_completed {
            width: 20px;
            height: 20px;
            border-radius: 20px;
        }

        .task_tags_holder > .task_tag {
            margin-left: 4px;
        }

        .view_milestones_fieldset {
            border: 1px solid #514A9D;
            padding-left: 10px;
            border-radius: 5px;
        }

        .assignpeople_list {
            margin-top: 2px;
            cursor: pointer;
            padding: 3px 0px 3px 0px;
            opacity: 0.6;
            background: #514A9D;
            color: #FFFFFF;
        }

        .assignpeople_list:hover {
            background: #FFFFFF;
            color: #514A9D;
        }

    </style>
</head>
<body style="font-family: 'HelveticaNeueThin'">
    <div class="full-bg-img dualcolorbackground">
    <nav class="navbar navbar-expand-sm fixed-top" style="margin-bottom: 0px;position: fixed;width: 100%;">
        <!-- Search Box-->
        <div class="search-box">
            <button class="dismiss"><i class="fa fa-times red-text"></i></button>
            <form id="searchForm" action="#" role="search">
                <input type="search" id="search-input" name="search-input" placeholder="What are you looking for..." class="form-control">
            </form>
        </div>
        <div class="container-fluid" style="height: 30px">
            <label style="font-size: large; ">Dashboard</label>
            <div id="navbar-right-options" style="float: right;height: 100%">
{#                <i class="fa fa-search fa-2x" id="search"></i>#}
{#                <i class="fa fa-bell-o fa-2x"></i><span class="badge red">12</span>#}
                <a href="{{ url_for('logout') }}"><label style="font-size: large">logout</label></a>
            </div>
        </div>
    </nav>

    <div class="card hoverable white navbar-search">
        <h1 class="black-text text-center">I Guess you are typing something </h1>
    </div>
    <div class="container-fluid" style="display: flex">
        <div class="sidebar">
            <div class="col-lg-12" style="display: flex">
                <img src="{{ user_details['img'] }}" class="rounded-circle" height="70px" width="70px">
                <div style="padding-left: 15px;padding-top: 10px">
                    <label>{{ user_details['username'] }}</label><br>
                    <p id="greetings_label">Have a great day :)</p>
                </div>
            </div>
            <div class="col-lg-12 text-center sidebar_items" style="margin-top: 20px">
                <label class="col-lg-12" style="font-size: large;color: #514A9D" id="create_task_sidebar_label"><i class="fa fa-pencil fa-1x"></i> Create Task</label>
{#                <label class="col-lg-12" style="font-size: large;color: #514A9D" id="calendar_sidebar_label"><i class="fa fa-calendar fa-1x"></i> Calendar</label>#}
                <label class="col-lg-12" style="font-size: large;color: #514A9D" id="my_tasks_sidebar_label"><i class="fa fa-calendar-check-o fa-1x"></i> My Tasks</label>
                <label class="col-lg-12" style="font-size: large;color: #514A9D" id="add_people_sidebar_label" data-toggle="modal" data-target="#addpeoplemodal"><i class="fa fa-user-plus fa-1x"></i>Add People</label>
            </div>
            <div class="col-lg-12">
                <div style="width: 100%;height: 1px;background: #514A9D"></div>
            </div>
        </div>
        <!-- Modal -->
<div class="modal fade" id="addpeoplemodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="margin-top: 15%">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add People</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: -20px">
                    <span aria-hidden="true"><i class="fa fa-close red-text"></i> </span>
                </button>
            </div>
            <div class="modal-body">
                <h3 class="text-center">Enter email of the person to invite</h3>
                    <div class="md-form">
                        <i class="fa fa-user prefix grey-text"></i>
                        <input type="hidden" name="added_by_input" value="{{ session['email'] }}">
                        <input class="form-control" type="email" id="add_people_input" name="add_people_input">
                        <label for="add_people_input">Email</label>
                    </div>
                    <div class="md-form text-center" id="add_people_btn">
                        <input type="submit" class="btn btn-primary" value="Invite">
                    </div>
            </div>
        </div>
    </div>
</div>

        <div class="modal fade" id="assignpeoplemodal" tabindex="-1" role="dialog" aria-labelledby="assignpeoplemodallabel" aria-hidden="true" style="margin-top: 5%">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Assign a Person</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: -20px">
                            <span aria-hidden="true"><i class="fa fa-close red-text"></i> </span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="col-md-2"></div>
                            <div class="col-md-8" style="height: 400px;overflow-y: scroll">
                            {% if people_details is not none %}
                                {% for people in people_details %}
                                <div class="{{ people['email'] }} assignpeople_list col-md-12">
                                     <div class="col-md-4">
                                         <img src="{{ people['img'] }}" style="width: 50px;height: 50px;border-radius: 50px">
                                     </div>
                                     <div class="col-md-8">
                                         <h5>{{ people['username'] }}</h5>
                                         <label>{{ people['email'] }}</label>
                                     </div>
                                </div>
                                {% endfor %}
                            {% endif %}
                            </div>
                            <div class="col-md-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="mainpane">



            <div class="container-fluid" id="create_task_container" style="display: none;">
                <form action="/dashboard/create_task" method="post">
                    <div class="col-lg-12" style="overflow-y: scroll">
                        <div class="col-lg-7 card white hoverable" style="z-index: 99">
                            <p class="h1 text-center" style="color: #337ab7">Create a Task</p>
                            <div class="md-form">
                                <i class="fa fa-pencil prefix grey-text"></i>
                                <input type="text" id="task_title" name="task_title" class="form-control form_non_calendar">
                                <label for="task_title">Title *</label>
                            </div>
                            <div class="task_assignee_holder flex-center">
                                 <h3 style="margin-top: 0px">Self task</h3>
                                 <label class="switch">
                                  <input type="checkbox" class="checkbox_task">
                                  <span class="slider round"></span>
                                </label>
                                <h3 style="margin-top: 0px">Assign task</h3>
                            </div>
                            <input type="hidden" id="task_assignee" name="task_assignee" value="{{ session['email'] }}">
                            <div class="text-center">
                                <label id="assignee_label">Assigned to <span id="assignee_span">{{ session['email']  }}</span></label>
                                <input type="hidden" id="task_assigned_by" name="task_assigned_by" value="{{ session['email'] }}">
                                <input type="hidden" id="task_creation_date" name="task_creation_date">
                                <input type="hidden" id="task_due_date" name="task_due_date">
                            </div>
                            <div class="md-form">
                                <i class="fa fa-list prefix grey-text"></i>
                                <textarea type="text" id="task_desc" name="task_desc" class="md-textarea" style="height: 100px"></textarea>
                                <label for="task_desc">Description *</label>
                            </div>
                            <div class="md-form text-center">
                                <button class="btn btn-primary btn-calendar"><i class="fa fa-calendar fa-1x"></i> Set Due Date</button>
                                <div class="box"></div>
                            </div>

                    </div>
                    <div class="col-lg-5" style="z-index: 99">
                        <div class="container-fluid card white hoverable" style="padding: 10px;">
                            <p class="h1 text-center" style="color: #337ab7">Set Milestones</p>
                            <div class="md-form">
                                <i class="fa fa-pencil prefix grey-text"></i>
                                <input type="text" placeholder="Enter an milestone.." id="milestone_item" name="milestone_item">
                            </div>

                            <button class="header_button" id="milestone_add">
                                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve"><g><path class="fill" d="M16,8c0,0.5-0.5,1-1,1H9v6c0,0.5-0.5,1-1,1s-1-0.5-1-1V9H1C0.5,9,0,8.5,0,8s0.5-1,1-1h6V1c0-0.5,0.5-1,1-1s1,0.5,1,1v6h6C15.5,7,16,7.5,16,8z"/></g></svg>
                            </button>
                        </div>
                        <div class="container-fluid card white hoverable" style="margin-top: 15px;max-height: 450px">
                            <h3 class="text-center">Task Milestones</h3>
                            <ul class="milestones_list">

                            </ul>
                        </div>
                    </div>
                    </div>
                <div class="md-form text-center" style="margin-top: 20px">
                    <input type="submit" class="create_task_btn" value="Create Task">
                </div>
            </form>
            </div>



            <div class="container-fluid" id="my_tasks_container">
                <div class="row">
                    <div class="col-lg-4" style="overflow: hidden">
                        <h3 class="white-text text-center">To be Started</h3>
                        <div class="tags_main">
                            <label id="tags_main_sub_all_start_task" style="color: #FFFFFF;cursor: pointer;">All</label>
                            <div id="tags_main_sub_important_start_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_start" style="background: #ffa000;">
                                </div><label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Important</label>
                            </div>
                            <div id="tags_main_sub_average_start_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_start" style="background: #00C853;"></div>
                                <label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Average</label>
                            </div>
                            <div id="tags_main_sub_starter_start_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_start" style="background: #aa00ff;"></div>
                                <label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Starter</label>
                            </div>
{#                            <button class="temp_btn_start">add</button>#}
                        </div>
                        <div id="about_to_start_task" class="cards_holder" style="height: 600px;overflow-y: scroll;">
                        {% if tasks_start_details is not none %}
                            {% for task in tasks_start_details %}
                                <div class="{{ task['task_id'] }} card hoverable white" style="padding: 10px;margin-bottom: 5px">
                                    <div class="task_tags_holder">
                                        {% if task['tag'] == 'important' %}
                                        <div class="{{ task['task_id'] }} important task_tag active_task_tag" style="background: #ffa000; opacity: 1"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% elif task['tag'] == 'average' %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag active_task_tag" style="background: #00C853; opacity: 1"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% elif task['tag'] == 'starter' %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag active_task_tag" style="background: #aa00ff; opacity: 1"></div>
                                        {% else %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% endif %}
                                    </div>
                                    <h3>{{ task['task_title'] }}</h3>
                                    <hr>
                                    <div class="readmore" style="overflow-y: hidden; color: #000">
                                        <p>{{ task['task_desc'] }}</p>
                                    </div>
                                    <label style="padding: 5px 10px 5px 10px; border-radius: 50px; border: 1px solid #514A9D">Due by : <span class="due-date">{{ task['task_due_date'] }}</span></label>
                                    <hr>
                                    <fieldset class="view_milestones_fieldset">
                                        <label class="view_milestones_legend" style="cursor: pointer;">View Milestones</label>
                                        <div class="view_milestones_div" style="display:none">
                                            <ul style="list-style: none">
                                            {% if task['task_milestones'] is not none %}
                                                {% if task['task_milestones']|length > 0 %}
                                                {% for milestone in task['task_milestones']%}
                                                <li>{{ milestone }}</li>
                                                    {% endfor %}
                                            {% endif %}
                                            {% endif %}
                                            </ul>
                                        </div>
                                    </fieldset>
                                    <div style="display: flex;margin-top: 5px">
                                        <div style="display: flex">
                                            <label>Assigned by : </label> <img src="{{ task['task_assigned_by_img']}}" class="rounded-circle" style="width: 25px;height: 25px;border-radius: 25px">
                                            <label>{{ task['task_assigned_by_username'] }}</label>
                                        </div>
                                        <div style="flex: 1;text-align: right">
                                            <label class="days_left"></label>
                                        </div>
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-4" style="overflow: hidden">
                        <h3 class="white-text text-center">Currently Working</h3>
                        <div class="tags_main">
                            <label id="tags_main_sub_all_current_task" style="color: #FFFFFF;cursor: pointer;">All</label>
                            <div id="tags_main_sub_important_current_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_current" style="background: #ffa000;">
                                </div><label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Important</label>
                            </div>
                            <div id="tags_main_sub_average_current_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_current" style="background: #00C853;"></div>
                                <label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Average</label>
                            </div>
                            <div id="tags_main_sub_starter_current_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_current" style="background: #aa00ff;"></div>
                                <label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Starter</label>
                            </div>
{#                            <button class="temp_btn_current">add</button>#}
                        </div>
                        <div id="current_tasks" class="cards_holder" style="height: 600px;overflow-y: scroll">
                            {% if tasks_current_details is not none %}
                            {% for task in tasks_current_details %}
                                <div class="{{ task['task_id'] }} card hoverable white" style="padding: 10px;margin-bottom: 5px">
                                    <div class="task_tags_holder">
                                        {% if task['tag'] == 'important' %}
                                        <div class="{{ task['task_id'] }} important task_tag active_task_tag" style="background: #ffa000; opacity: 1"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% elif task['tag'] == 'average' %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag active_task_tag" style="background: #00C853; opacity: 1"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% elif task['tag'] == 'starter' %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag active_task_tag" style="background: #aa00ff; opacity: 1"></div>
                                        {% else %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% endif %}
                                    </div>
                                    <h3>{{ task['task_title'] }}</h3>
                                    <hr>
                                    <div class="readmore" style="overflow-y: hidden; color: #000">
                                        <p>{{ task['task_desc'] }}</p>
                                    </div>
                                    <label style="padding: 5px 10px 5px 10px; border-radius: 50px; border: 1px solid #514A9D">Due by : <span class="due-date">{{ task['task_due_date'] }}</span></label>
                                    <hr>
                                    <fieldset class="view_milestones_fieldset">
                                        <label class="view_milestones_legend" style="cursor: pointer;">View Milestones</label>
                                        <div class="view_milestones_div" style="display:none">
                                            <ul style="list-style: none">
                                            {% if task['task_milestones'] is not none %}
                                                {% if task['task_milestones']|length > 0 %}
                                                {% for milestone in task['task_milestones']%}
                                                <li>{{ milestone }}</li>
                                                    {% endfor %}
                                            {% endif %}
                                            {% endif %}
                                            </ul>
                                        </div>
                                    </fieldset>
                                    <div style="display: flex;margin-top: 5px">
                                        <div style="display: flex">
                                            <label>Assigned by : </label> <img src="{{ task['task_assigned_by_img']}}" class="rounded-circle" style="width: 25px;height: 25px;border-radius: 25px">
                                            <label>{{ task['task_assigned_by_username'] }}</label>
                                        </div>
                                        <div style="flex: 1;text-align: right">
                                            <label class="days_left"></label>
                                        </div>
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-4" style="overflow: hidden">
                        <h3 class="white-text text-center">Completed </h3>
                        <div class="tags_main">
                            <label id="tags_main_sub_all_completed_task" style="color: #FFFFFF;cursor: pointer;">All</label>
                            <div id="tags_main_sub_important_completed_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_completed" style="background: #ffa000;">
                                </div><label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Important</label>
                            </div>
                            <div id="tags_main_sub_average_completed_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_completed" style="background: #00C853;"></div>
                                <label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Average</label>
                            </div>
                            <div id="tags_main_sub_starter_completed_task" class="tags_main_sub" style="display: flex;">
                                <div class="task_tag_main_completed" style="background: #aa00ff;"></div>
                                <label style="color: #FFFFFF;margin-left: 2px;cursor: pointer;">Starter</label>
                            </div>
{#                            <button class="temp_btn_completed">add</button>#}
                        </div>
                        <div id="completed_tasks" class="cards_holder"  style="height: 600px;overflow-y: scroll;">
                            {% if tasks_completed_details is not none %}
                            {% for task in tasks_completed_details %}
                                <div class="{{ task['task_id'] }} card hoverable white" style="padding: 10px;margin-bottom: 5px">
                                    <div class="task_tags_holder">
                                        {% if task['tag'] == 'important' %}
                                        <div class="{{ task['task_id'] }} important task_tag active_task_tag" style="background: #ffa000; opacity: 1"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% elif task['tag'] == 'average' %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag active_task_tag" style="background: #00C853; opacity: 1"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% elif task['tag'] == 'starter' %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag active_task_tag" style="background: #aa00ff; opacity: 1"></div>
                                        {% else %}
                                        <div class="{{ task['task_id'] }} important task_tag" style="background: #ffa000; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} average task_tag" style="background: #00C853; opacity: 0.3"></div>
                                        <div class="{{ task['task_id'] }} starter task_tag" style="background: #aa00ff; opacity: 0.3"></div>
                                        {% endif %}
                                    </div>
                                    <h3>{{ task['task_title'] }}</h3>
                                    <hr>
                                    <div class="readmore" style="overflow-y: hidden; color: #000">
                                        <p>{{ task['task_desc'] }}</p>
                                    </div>
                                    <label style="padding: 5px 10px 5px 10px; border-radius: 50px; border: 1px solid #514A9D">Due by : <span class="due-date">{{ task['task_due_date'] }}</span></label>
                                    <hr>
                                    <fieldset class="view_milestones_fieldset">
                                        <label class="view_milestones_legend" style="cursor: pointer;">View Milestones</label>
                                        <div class="view_milestones_div" style="display:none">
                                            <ul style="list-style: none">
                                            {% if task['task_milestones'] is not none %}
                                                {% if task['task_milestones']|length > 0 %}
                                                {% for milestone in task['task_milestones']%}
                                                <li>{{ milestone }}</li>
                                                    {% endfor %}
                                            {% endif %}
                                            {% endif %}
                                            </ul>
                                        </div>
                                    </fieldset>
                                    <div style="display: flex;margin-top: 5px">
                                        <div style="display: flex">
                                            <label>Assigned by : </label> <img src="{{ task['task_assigned_by_img']}}" class="rounded-circle" style="width: 25px;height: 25px;border-radius: 25px">
                                            <label>{{ task['task_assigned_by_username'] }}</label>
                                        </div>
                                        <div style="flex: 1;text-align: right">
                                            <label class="days_left"></label>
                                        </div>
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <script src="{{ url_for('static', filename = 'js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'js/jquery-3.2.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'js/dragula.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'js/moment.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'js/pignose.calendar.js') }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Readmore.js/2.2.0/readmore.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/js/mdb.min.js"></script>

<script>
    $(function () {
        dragula([document.getElementById("about_to_start_task"), document.getElementById("current_tasks"), document.getElementById("completed_tasks")])
            .on('drag', function (el) {
            console.log("asd");
          }).on('drop', function (el) {
            // $(el).find('.current_pos').text($(el).closest('.cards_holder').attr("id"));
            if($(el).closest('.cards_holder').attr("id").toString() == "about_to_start_task") {
                $.ajax({
                    type: 'POST',
                    url: "{{ url_for('change_task_status') }}",
                    dataType: "json",
                    data: JSON.stringify({
                      'task_id': $(el).attr('class').split(" ")[0],
                        'task_status' : 'start'
                    }),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(resultData) {

                    }
                });
            }else if($(el).closest('.cards_holder').attr("id").toString() == "current_tasks"){
                $.ajax({
                    type: 'POST',
                    url: "{{ url_for('change_task_status') }}",
                    dataType: "json",
                    data: JSON.stringify({
                      'task_id': $(el).attr('class').split(" ")[0],
                        'task_status' : 'current'
                    }),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(resultData) {

                    }
                });
            }else if($(el).closest('.cards_holder').attr("id").toString() == "completed_tasks"){
                $.ajax({
                    type: 'POST',
                    url: "{{ url_for('change_task_status') }}",
                    dataType: "json",
                    data: JSON.stringify({
                      'task_id': $(el).attr('class').split(" ")[0],
                        'task_status' : 'completed'
                    }),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(resultData) {

                    }
                });
            }
{#            console.log($(el).closest('.cards_holder').attr("id"));#}
{#            console.log($(el).attr('class').split(" "));#}
          }).on('over', function (el, container) {
{#            console.log("over");#}
          }).on('out', function (el, container) {
{#            console.log("out");#}
          });
        $('.btn-calendar').pignoseCalendar({
                apply: onApplyHandler,
                modal: true, // It means modal will be showed when you click the target button.
                buttons: true,
                multiple: true
        });
         function onApplyHandler(date, context) {
				/**
				 * @date is an array which be included dates(clicked date at first index)
				 * @context is an object which stored calendar interal data.
				 * @context.calendar is a root element reference.
				 * @context.calendar is a calendar element reference.
				 * @context.storage.activeDates is all toggled data, If you use toggle type calendar.
				 * @context.storage.events is all events associated to this date
				 */

                var $element = context.element;
                var $calendar = context.calendar;
                var $box = $element.siblings('.box').show();
                var text = 'Scheduled period : ';

                if (date[0] !== null) {
                    text += date[0].format('DD-MM-YYYY');
                    $('#task_creation_date').val(date[0].format('DD-MM-YYYY'));
                }

                if (date[0] !== null && date[1] !== null) {
                    text += ' ~ ';
                }
                else if (date[0] === null && date[1] == null) {
                    text += 'nothing';
                }

                if (date[1] !== null) {
                    text += date[1].format('DD-MM-YYYY');
                    $('#task_due_date').val(date[1].format('DD-MM-YYYY'));
                }
                $box.text(text);
            }
        var now = new Date();
        var hours = now.getHours();
        if(hours < 12){
            $('#greetings_label').text("Good Morning !");
        }else if(hours < 17) {
            $('#greetings_label').text("Good Afternoon !");
        }else {
            $('#greetings_label').text("Good Evening !");
        }
        $('#search').on('click', function (e) {
            e.preventDefault();
            $('.search-box').fadeIn();
            $('#search-input').focus();
        });
        $('#search-input').on('keyup',function (e) {
            $('.navbar-search').show();
        });
        $('.dismiss').on('click', function (e) {
            e.preventDefault();
            $('.search-box').fadeOut();
            $('.navbar-search').hide();
        });
        $('.checkbox_task').change(function () {
            if(this.checked) {
                $('#assignpeoplemodal').modal('show');
            }else{
                $('#assignpeoplemodal').modal('hide');
                $('#assignee_span').text("{{ session['email'] }}");
                $('#task_assignee').val("{{ session['email'] }}");
            }
        });
        $('.form_non_calendar').on('keypress', function (e) {
            if(e.which===13){
                e.preventDefault();
            }
        });
        $('#milestone_item').on('keypress', function (e) {
            if(e.which===13){
                e.preventDefault();
            }
            if(e.which===13 && $('#milestone_item').val().trim().length > 0) {
                e.preventDefault();
                $('.milestones_list').prepend('<li class="milestone_li"><div class="delete_btn"><i class="fa fa-trash-o red-text delete_li"></i> | <i class="fa fa-pencil green-text"></i></div><div class="milestone_content"><input type="hidden" name="milestones" value="'+$('#milestone_item').val().trim()+'">'+$('#milestone_item').val().trim()+'</div></li>');
                $('#milestone_item').val("");
            }
        });
        $('#milestone_add').on('click', function (e) {
            e.preventDefault();
            if($('#milestone_item').val().trim().length > 0) {
                $('.milestones_list').prepend('<li class="milestone_li"><div class="delete_btn"><i class="fa fa-trash-o red-text delete_li"></i> | <i class="fa fa-pencil green-text"></i></div><div class="milestone_content"><input type="hidden" name="milestones" value="'+$('#milestone_item').val().trim()+'">'+$('#milestone_item').val().trim()+'</div></li>');
                $('#milestone_item').val("");
            }
        });
        $('.milestones_list').on('click','.delete_li',function (e) {
            $(this).closest('.milestone_li').remove();
        });
        $('#create_task_sidebar_label').click(function () {
            $('#calendar_container').hide();
            $('#my_tasks_container').hide();
            $('#create_task_container').show();
        });
        $('#my_tasks_sidebar_label').click(function () {
            $('#calendar_container').hide();
            $('#create_task_container').hide();
            $('#my_tasks_container').show();
        });
        var lineHeight = 20;
        var numLines = 3;

        $('.readmore').readmore({
          speed: 1000,
          collapsedHeight: lineHeight * numLines,
          heightMargin: lineHeight * 1
        });

        var today = new Date();
        var date_to_reply = new Date('2018-01-10');
        var timeinmilisec = date_to_reply.getTime() - today.getTime();
        // alert( Math.ceil(timeinmilisec / (1000 * 60 * 60 * 24)) );

        $('.cards_holder').on('click','.task_tag',function () {
            if($(this).hasClass("active_task_tag")){
                $(this).removeClass("active_task_tag");
                $(this).css({'opacity': 0.3});
            } else{
                $(this).parent().children().removeClass("active_task_tag")
                $(this).parent().children().css({'opacity': 0.3});
                $(this).addClass("active_task_tag");
                $(this).css({'opacity': 1});
                $.ajax({
                    type: 'POST',
                    url: "{{ url_for('change_task_tag') }}",
                    dataType: "json",
                    data: JSON.stringify({
                      'task_id': $(this).attr('class').split(" ")[0],
                        'task_tag' : $(this).attr('class').split(" ")[1]
                    }),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(resultData) {

                    }
                });
            }
        });
        // start task scripts
        
        $('#tags_main_sub_important_start_task').click(function(){
            var imp_nodes = [];
            $('#about_to_start_task').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("important")) {
                    imp_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < imp_nodes.length ; i++) {
                imp_nodes[i].show();
            }
        });

        $('#tags_main_sub_average_start_task').click(function(){
            var avg_nodes = [];
            $('#about_to_start_task').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("average")) {
                    avg_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < avg_nodes.length ; i++) {
                avg_nodes[i].show();
            }
        });

        $('#tags_main_sub_starter_start_task').click(function(){
            var srt_nodes = [];
            $('#about_to_start_task').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("starter")) {
                    srt_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < srt_nodes.length ; i++) {
                srt_nodes[i].show();
            }
        });


        $('#tags_main_sub_all_start_task').click(function () {
             $('#about_to_start_task').find('.card').each(function(){
                $(this).show();
             });
        });

        $('.temp_btn_start').click(function(){
            $('#about_to_start_task').prepend('<div class="card hoverable white" style="padding: 10px;margin-bottom: 5px"> <div class="task_tags_holder"> <div class="important task_tag" style="background: #ffa000; opacity: 0.3"></div><div class="average task_tag" style="background: #00C853; opacity: 0.3"></div><div class="starter task_tag" style="background: #aa00ff; opacity: 0.3"></div></div><h3>Ensure every record to be safe in database</h3><hr> <div class="readmore" style="overflow-y: hidden; color: #000"> <p>Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism. Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism. Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism</p></div><label style="padding: 5px 10px 5px 10px; border-radius: 50px; border: 1px solid #514A9D">Due by : 2018-07-10</label><hr> <fieldset class="view_milestones_fieldset"> <label class="view_milestones_legend" style="cursor: pointer;">View Milestones</label> <div class="view_milestones_div" style="display:none" > <ul style="list-style: none"> <li>milestone 1</li><li>milestone 2</li></ul> </div></fieldset> <div style="display: flex;margin-top: 5px"> <div style="display: flex"> <label>Assigned by : </label> <img src="{{url_for('static', filename="imgs/bobbylist_user.png")}}" class="rounded-circle" style="width: 25px;height: 25px;border-radius: 25px"> <label>BharathAppali</label> </div><div style="flex: 1;text-align: right"> <label>51 days to go</label> </div></label></div></div>');

            $('.readmore').readmore({
                  speed: 1000,
                  collapsedHeight: lineHeight * numLines,
                  heightMargin: lineHeight * 1
            });
        });

        // start task scripts ends here

        // currents tasks scripts starts here

        $('#tags_main_sub_important_current_task').click(function(){
            var imp_nodes = [];
            $('#current_tasks').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("important")) {
                    imp_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < imp_nodes.length ; i++) {
                imp_nodes[i].show();
            }
        });

        $('#tags_main_sub_average_current_task').click(function(){
            var avg_nodes = [];
            $('#current_tasks').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("average")) {
                    avg_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < avg_nodes.length ; i++) {
                avg_nodes[i].show();
            }
        });

        $('#tags_main_sub_starter_current_task').click(function(){
            var srt_nodes = [];
            $('#current_tasks').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("starter")) {
                    srt_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < srt_nodes.length ; i++) {
                srt_nodes[i].show();
            }
        });


        $('#tags_main_sub_all_current_task').click(function () {
             $('#current_tasks').find('.card').each(function(){
                $(this).show();
             });
        });

        $('.temp_btn_current').click(function(){
            $('#current_tasks').prepend('<div class="card hoverable white" style="padding: 10px;margin-bottom: 5px"> <div class="task_tags_holder"> <div class="important task_tag" style="background: #ffa000; opacity: 0.3"></div><div class="average task_tag" style="background: #00C853; opacity: 0.3"></div><div class="starter task_tag" style="background: #aa00ff; opacity: 0.3"></div></div><h3>Ensure every record to be safe in database</h3><hr> <div class="readmore" style="overflow-y: hidden; color: #000"> <p>Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism. Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism. Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism</p></div><label style="padding: 5px 10px 5px 10px; border-radius: 50px; border: 1px solid #514A9D">Due by : 2018-07-10</label><hr> <fieldset class="view_milestones_fieldset"> <label class="view_milestones_legend" style="cursor: pointer;">View Milestones</label> <div class="view_milestones_div" style="display:none" > <ul style="list-style: none"> <li>milestone 1</li><li>milestone 2</li></ul> </div></fieldset> <div style="display: flex;margin-top: 5px"> <div style="display: flex"> <label>Assigned by : </label> <img src="{{url_for('static', filename="imgs/bobbylist_user.png")}}" class="rounded-circle" style="width: 25px;height: 25px;border-radius: 25px"> <label>BharathAppali</label> </div><div style="flex: 1;text-align: right"> <label>51 days to go</label> </div></div></div>');

            $('.readmore').readmore({
                  speed: 1000,
                  collapsedHeight: lineHeight * numLines,
                  heightMargin: lineHeight * 1
            });
        });


        // current tasks scripts ends here

        // completed tasks scripts starts here

        $('#tags_main_sub_important_completed_task').click(function(){
            var imp_nodes = [];
            $('#completed_tasks').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("important")) {
                    imp_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < imp_nodes.length ; i++) {
                imp_nodes[i].show();
            }
        });

        $('#tags_main_sub_average_completed_task').click(function(){
            var avg_nodes = [];
            $('#completed_tasks').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("average")) {
                    avg_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < avg_nodes.length ; i++) {
                avg_nodes[i].show();
            }
        });

        $('#tags_main_sub_starter_completed_task').click(function(){
            var srt_nodes = [];
            $('#completed_tasks').find('.task_tag').each(function(){
                if($(this).hasClass("active_task_tag") && $(this).hasClass("starter")) {
                    srt_nodes.push($(this).parent().closest('.card'));
                }
                $(this).parent().closest('.card').hide();
            });
            for(i = 0 ; i < srt_nodes.length ; i++) {
                srt_nodes[i].show();
            }
        });


        $('#tags_main_sub_all_completed_task').click(function () {
             $('#completed_tasks').find('.card').each(function(){
                $(this).show();
             });
        });

        $('.temp_btn_completed').click(function(){
            $('#completed_tasks').prepend('<div class="card hoverable white" style="padding: 10px;margin-bottom: 5px"> <div class="task_tags_holder"> <div class="important task_tag" style="background: #ffa000; opacity: 0.3"></div><div class="average task_tag" style="background: #00C853; opacity: 0.3"></div><div class="starter task_tag" style="background: #aa00ff; opacity: 0.3"></div></div><h3>Ensure every record to be safe in database</h3><hr> <div class="readmore" style="overflow-y: hidden; color: #000"> <p>Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism. Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism. Create a stage application to check whether every record is safe in database, If not make it safe with a firewall transaction mechanism</p></div><label style="padding: 5px 10px 5px 10px; border-radius: 50px; border: 1px solid #514A9D">Due by : 2018-07-10</label><hr> <fieldset class="view_milestones_fieldset"> <label class="view_milestones_legend" style="cursor: pointer;">View Milestones</label> <div class="view_milestones_div" style="display:none" > <ul style="list-style: none"> <li>milestone 1</li><li>milestone 2</li></ul> </div></fieldset> <div style="display: flex;margin-top: 5px"> <div style="display: flex"> <label>Assigned by : </label> <img src="{{url_for('static', filename="imgs/bobbylist_user.png")}}" class="rounded-circle" style="width: 25px;height: 25px;border-radius: 25px"> <label>BharathAppali</label> </div><div style="flex: 1;text-align: right"> <label>51 days to go</label> </div></div></div>');

            $('.readmore').readmore({
                  speed: 1000,
                  collapsedHeight: lineHeight * numLines,
                  heightMargin: lineHeight * 1
            });
        });

        // completed tasks scripts ends here


        $('.cards_holder').on('click', '.view_milestones_fieldset',function (e) {
            $(this).find('.view_milestones_div').toggle();
        });

        $('.assignpeople_list').click(function () {
            $('#task_assignee').val($(this).attr('class').split(" ")[0]);
            $('#assignee_span').text($(this).attr('class').split(" ")[0]);
            $('#assignpeoplemodal').modal('hide');
        });

        $('#add_people_btn').click(function () {
            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            if($('#add_people_input').val().trim().length > 0 && re.test($('#add_people_input').val())) {
                $.ajax({
                    type: 'POST',
                    url: "{{ url_for('invite_people') }}",
                    dataType: "json",
                    data: JSON.stringify({
                      'add_people_input': $('#add_people_input').val()
                    }),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(resultData) {
                        $('#addpeoplemodal').modal('hide');
                    }
                });
                $('#addpeoplemodal').modal('hide');
            }
        });
    });
</script>
</body>
</html>